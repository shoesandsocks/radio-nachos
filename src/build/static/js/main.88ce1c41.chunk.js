(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),c=a.n(r),i=(a(12),a(3)),o=a(1);var s=function(){var e=Object(n.useState)(20),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([["",100,""]]),s=Object(o.a)(c,2),m=s[0],p=s[1],u=Object(n.useState)({playlists:[],compositions:[]}),d=Object(o.a)(u,2),y=d[0],f=d[1],h=Object(n.useState)(""),g=Object(o.a)(h,2),v=g[0],b=g[1],E=Object(n.useState)(!1),w=Object(o.a)(E,2),k=w[0],N=w[1];Object(n.useEffect)((function(){fetch("/getPrev").then((function(e){return e.json()})).then((function(e){return f(e)})).catch((function(e){console.log(e)}))}),[]);var O=function(e){var t=e.target,a=t.name,n=t.value;if("tracks"===a&&r(n),a.match(/^playlist/)){var l=a.replace("playlist","").toString(),c=Object(i.a)(m);return c[l][0]=n,void(n.match(/^spotify:playlist:[a-zA-Z0-9]{22}$/)?function(e,t){fetch("/playlistlookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({str:e})}).then((function(e){return e.json()})).then((function(e){var a=e.error,n=e.name;console.log(a);var l=Object(i.a)(m);return l[t][2]=n||"",p(l)})).catch((function(e){return console.log(e)}))}(n,l):(c[l][2]="",p(c)))}if(a.match(/^percent/)){var o=a.replace("percent","").toString(),s=Object(i.a)(m);s[o][1]=n,p(s)}},S=function(e){var t=Object(i.a)(m);t.push(["",0]),p(t)},j=function(e){var t=m.filter((function(t,a){return a!==Number(e.target.value)}));p(t)},T=function(e){return e.reduce((function(e,t){return e+Number(t[1])}),0)};return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"radio nachos playmaker"),l.a.createElement("form",{id:"creator-form"},l.a.createElement("fieldset",{id:"fieldset"},l.a.createElement("div",{id:"all-entries"},m.map((function(e,t){return function(e,t,a,n,r){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return l.a.createElement("div",{key:e},l.a.createElement("div",{className:"above-entry-wrap"},l.a.createElement("p",{className:"label-spacer"}),l.a.createElement("p",{className:"playlist-name-lookup",id:"playlist1-name-lookup"},t[2])),l.a.createElement("div",{className:"one-entry-wrap"},l.a.createElement("label",{htmlFor:"playlist".concat(e)},"playlist ID"),l.a.createElement("input",{type:"text",name:"playlist".concat(e),id:"playlist".concat(e),className:"playlist-id","data-lpignore":"true",required:!0,placeholder:"spotify:playlist:37i9dQZF1DZ06evO05tE88",value:t[0],onChange:a}),l.a.createElement("input",{type:"number",className:"percentage",id:"percent".concat(e),name:"percent".concat(e),value:t[1],min:"1",max:"100",step:"1",onChange:a}),l.a.createElement("label",{htmlFor:"percent".concat(e)},"%"),l.a.createElement("button",{type:"button",className:"add-entry-button ".concat(c?"":"visually-hidden"),id:"add-entry-button-".concat(e),value:e,onClick:n},"add more"),!i&&l.a.createElement("button",{type:"button",className:"remove-entry-button",id:"remove-entry-button-".concat(e),value:e,onClick:r},"remove this")))}(t,e,O,S,j,t===m.length-1,1===m.length)}))),l.a.createElement("p",{id:"total"},T(m)),l.a.createElement("p",{id:"currentVal"},a),l.a.createElement("label",{htmlFor:"tracks"},"how many tracks? (10 - 99)"),l.a.createElement("br",null),l.a.createElement("input",{type:"range",id:"tracks-input",name:"tracks",value:a,min:"10",max:"99",step:"1",onChange:O}),l.a.createElement("br",null),l.a.createElement("div",{id:"count-and-button"},l.a.createElement("span",{id:"global-error"},v),l.a.createElement("button",{id:"submit-btn",type:"submit",onClick:function(e){return e.preventDefault(),N(!0),100!==T(m)?(setTimeout((function(){return b("")}),7e3),b("C'mon. That's not 100%, Brad.")):m.map((function(e){return e[2]})).includes("")?(setTimeout((function(){return b("")}),7e3),b("Missing a valid playlist there?")):void fetch("/make",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arrayOfArrays:m,numberOfTracks:a})}).then((function(e){return e.json()})).then((function(e){var t=e.listId,a=e.timestamp,n=e.error;if(n)return alert(n);var l=new URL(window.location.href);return window.location.href="".concat(l.origin,"/radio?listId=").concat(t,"&timestamp=").concat(a)})).catch((function(e){console.log(e)}))},disabled:k},k?"~ ~ ~ ~ ~ ~":"create playlist")))),l.a.createElement("h2",null,"Previous playlists"),l.a.createElement("ul",{id:"previous"},!y.playlists.length&&l.a.createElement("li",null,l.a.createElement("p",{id:"nope"},"you have no previous playlists")),function(e,t,a){var n=function(e){var n=JSON.parse(e.target.dataset.composition),l=e.target.dataset.tracks,r=n.map((function(e){return[e.playlistId,e.percentage,e.playlistName]}));t(r),a(l),window.scrollTo({top:0,left:0,behavior:"smooth"})},r=function(e){var t=e.target.id.replace("playlist-","");fetch("/deletePlaylist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToDelete:t})}).then((function(e){200===e.status?window.location.reload():alert("Something went wrong. Server status: ".concat(e.status))})).catch((function(e){alert("Something went wrong. ".concat(JSON.stringify(e)))}))};try{var c=e.playlists,i=e.compositions;return c.map((function(e){var t=e.id,a=+e.name.split("-")[2],c=new Date(a),o="https://www.porknachos.com/files/naviavi.jpg";e.images&&e.images.length>1&&(o=e.images[1].url);var s=i.filter((function(e){return e.timestamp===a.toString()}))[0],m="".concat(c.toLocaleTimeString(),", ").concat(c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"}));if(void 0!==s){var p=s.compositionData,u=s.numberOfTracks;return!u||u<1?l.a.createElement("li",{key:t,className:"playlist-entry-wrap"},l.a.createElement("a",{href:"/radio?timestamp=".concat(a,"&listId=").concat(t)},l.a.createElement("img",{src:o,alt:"playlist graphic from spotify"}),l.a.createElement("p",null,"An empty playlist")),l.a.createElement("div",{className:"playlist-buttons"},l.a.createElement("div",null,"\xa0"),l.a.createElement("button",{onClick:r,className:"delete-playlist-btn",id:"playlist-".concat(t)},"delete this playlist")),"`"):l.a.createElement("li",{key:t,className:"playlist-entry-wrap"},l.a.createElement("a",{href:"/radio?timestamp=".concat(a,"&listId=").concat(t)},l.a.createElement("img",{src:o,alt:"playlist graphic from spotify"}),l.a.createElement("p",null,m," - ",u," songs")),p.map((function(e){return l.a.createElement("p",{key:e.playlistId,className:"one-playlist-line"},e.playlistName," (",e.playlistId,")",l.a.createElement("span",null,e.percentage,"%"))})),l.a.createElement("div",{className:"playlist-buttons"},l.a.createElement("button",{className:"make-another-btn","data-composition":JSON.stringify(p),"data-tracks":u,onClick:n},"Set up a similar playlist"),l.a.createElement("button",{onClick:r,className:"delete-playlist-btn",id:"playlist-".concat(t)},"delete this playlist")),"`")}return l.a.createElement("li",{className:"playlist-entry-wrap"},l.a.createElement("a",{href:"/radio?timestamp=".concat(a,"&listId=").concat(t)},l.a.createElement("img",{src:"".concat(e.images[1].url),alt:"playlist graphic from spotify"}),l.a.createElement("p",null,"$",m)))}))}catch(o){return console.log(o,"error mapping playlists"),l.a.createElement("a",{href:"/"},"Something failed catastrophically. Try logging in again.")}}(y,p,r)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.88ce1c41.chunk.js.map